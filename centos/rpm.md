
## RPM

### RPM, YUM, Package ???
rpm 명령어는 RPM 패키지를 설치/제거하는 명령어이다.
이전에는 애플리케이션 사용하려면 코드만을 제공해 직접 컴파일을해야만 했었다.
이것은 너무 불편하기때문에 사전에 컴파일된 바이너리 파일과 그에 관련된 파일들을 제공하게 되었고 
이를 한묶음의 파일로 제공하는 것을 패키지라고 한다.  

CentOS에서는 rpm이라는 명령어로 피키지를 관리한다. 

#### RPM 패키지
패키지 형식은 리눅스 디스트리뷰션에 따라 다르며 위키피디아에 의하면 

RPM : RedHat 계열(CentOS 등)
deb : Debian 용도(Ubuntu 등)
ports : FreeDSB 
pkg : Solaris

이다. 

CentOS에서는 RMP 패키지를 사용하며 '*.rpm' 확장자를 사용한다. 
rpm 파일은 위에서 설명한 바와 같이 애플리케이션의 바이너리와 이를 동작하는데 필요한 각종 파일이 포함돼 있다.
소스 코드 형식의 패키지는 'SRPM(소스 패키지)' 라고하며 '*.src.rpm' 확장자를 갖는다.

SRPM은 RPM 패키지를 만들기 위한 소스로 SRPM을 빌드해 RPM 패키지를 만든다.

### 패키지 관리
RedHat 계열에서 사용하는 RPM 패키지 관리하는 'rpm'에 대해 정리한다. 

#### rpm(RedHat Package Manager)
rpm 명령어는 설치한 패키지를 관리한다. 
패키지는 다른 패키지에 의존 관계를 가지고 있을 수 있으며 rpm 명령어를 사용해 
A패키지를 설치시 의존 관계인 B패키지가 설치되어 있지 않으면 설치할 수가 없다. 
반대로 A,B 패키지가 설치된 경우 B패키지를 rpm명령어로 삭제하려고 하면 '패키지 A에서 사용하고 있으므로 삭제할 수 없다'는 에러가 메시지가 출력된다.

의존관계 관리란 이러한 패키지간의 의존관계 정보를 관리하는 것을 말한다. 
rpm에서는 설치한 패키지의 의존관계를 RPM 데이터베이스에 등록하고 있어 삭제할 때 확인이 어려운 문제가 있다. 

```bash
// 설치된 패키지 목록 확인
# rpm -qa 
// 패키지 정보 확인
# rpm -qi {package name} 
// 패키지 설치 파일 목록 확인
# rpm -ql {package name} 
// 파일이 어느 패키지에 포함됐는지 확인
# rpm -qf {file path}
```

rpm으로 패키지를 설치하려면 의존 관계를 가지고 있는 패키지를 다 설치해야 되는데 예를 들어 10개의 패키지를 설치해야 되고 그 10개 패키지가 10개의 의존 관계를 가지고 있고 또 ..
한마디로 의존 관계를 관리하지 못하는 것이 가장 큰 문제점이다.

#### yum
yum도 패키지를 관리하는 명령어로 rpm과 목적은 동일하다. 
yum은 위에서 언급한 'rpm의 문제점'을 자동으로 해결해 준다.
yum은 패키지를 설치할 때 의존하는 패키지를 모두 다운로드하여 의존 관계 패키지를 모두 설치해 준다.

yum은 지정한 애플리케이션을 설치할 때 필요한 패키지를 자동으로 다운로드한다. 
다시 말해 다운로드 할 수 있는 장소를 알고 있다는 것인데 이 장소를 리포지토리(repository, 저장소)라고 한다.

yum이 참조하는 리포지토리는 

> /etc/yum.repos.d/

에 파일로 관리한다. 

```bash
#  cd /etc/yum.repos.d
# ll
total 8
-rw-r--r-- 1 root root 1925 Jan  7  2016 CentOS-Base.repo.org
-rw-r--r-- 1 root root 1564 Jan  7  2016 CentOS-Ucloud.repo
```
OS 설치 시에 CentOS-Bae.repo 라는 파일이 제공되면 일반적으로 이 저장소를 참조한다. 
yum은 이러한 메카니즘을 가지고 있어 '리포지토리에 존재하지 않는 패키지는 설치할 수 없다'는 것이다.
다시 말해 최신 버전의 패키지가 리포지토리에 없다면 설치할 수가 없다. 

그럼 (리포지토리에 없는) 최신 버전의 패키지를 설치하려면 어떻게 해야 할까?

다음 2가지 방법이 있다.
첫 번째는 공식 사이트에서 제공하고 있는 최신 RPM 패키지를 내려받아 직접 rpm 명령어로 설치하는 방법이고 두 번째는 최신 패키지를 제공하는 리포티토리를 추가하는 방법이 있다. 

서드파티 yum 리포지토리는 다양한 제공되고 있으며 epel, remi, rpmforge 등이 많이 사용되고 있으며 자체 개발한 패키지 배포 용도로 사내에서 구출할 수도 있다. 


